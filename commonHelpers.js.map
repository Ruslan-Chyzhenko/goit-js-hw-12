{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// render-functions\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function displayImages(images, gallery, lightbox) {\n    gallery.innerHTML = '';\n\n    const imageCards = images.map(image => {\n        const card = document.createElement('div');\n        card.classList.add('card');\n\n        card.innerHTML = `\n            <a href=\"${image.largeImageURL}\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" title=\"${image.tags}\">\n            </a>\n            <div class=\"overlay\">\n                <div class=\"details\">\n                    <p>Likes: ${image.likes}</p>\n                    <p>Views: ${image.views}</p>\n                    <p>Comments: ${image.comments}</p>\n                    <p>Downloads: ${image.downloads}</p>\n                </div>\n            </div>\n        `;\n\n        return card;\n    });\n\n    imageCards.forEach(card => {\n        gallery.appendChild(card);\n    });\n\n    lightbox.refresh();\n}\n\nexport function toastError(message) {\n    iziToast.error({\n        title: 'Error',\n        message: message,\n        backgroundColor: '#EF4040',\n        progressBarColor: '#FFE0AC',\n        icon: 'icon-close',\n        position: 'topRight',\n        displayMode: 'replace',\n        closeOnEscape: true,\n        pauseOnHover: false,\n        maxWidth: 432,\n        messageSize: '16px',\n        messageLineHeight: '24px',\n    });\n}\n\nexport function showLoader(loader) {\n    loader.classList.remove('hidden');\n}\n\nexport function hideLoader(loader) {\n    loader.classList.add('hidden');\n}\n\nexport function resetForm(form) {\n    form.reset();\n}","import axios from 'axios';\nimport { hideLoader } from './render-functions'; \n\nlet currentPage = 1;\nlet currentQuery = '';\nconst perPage = 15; \n\nexport async function searchImages(query) {\n    currentQuery = query;\n    currentPage = 1;\n    return fetchImages(query, currentPage);\n}\n\nexport async function fetchNextPage() {\n    currentPage++;\n    return fetchImages(currentQuery, currentPage);\n}\n\nasync function fetchImages(query, page) {\n    const API_KEY = '42262858-7b31826aafbc45fb5436f2ee9';\n    const url = `https://pixabay.com/api/?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n    try {\n        const response = await axios.get(url);\n        hideLoader(); \n        return response.data.hits;\n    } catch (error) {\n        console.error('Error fetching images:', error.message);\n        throw new Error(`Error fetching images: ${error}`);\n    }\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { searchImages, fetchNextPage } from './js/pixabay-api'; \n\nconst lightbox = new SimpleLightbox('.gallery a');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst form = document.querySelector('.search-form');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nloadMoreBtn.addEventListener('click', async () => {\n    try {\n        const images = await fetchNextPage();\n        appendImages(images);\n        smoothScrollToNextGroup();\n    } catch (error) {\n        console.error('Error fetching next page:', error.message);\n    }\n});\n\ndocument.addEventListener('DOMContentLoaded', async () => {\n    initializeSearch(form);\n});\n\nasync function initializeSearch(form) {\n    form.addEventListener('submit', async (event) => {\n        event.preventDefault();\n        const query = form.querySelector('input').value.trim();\n        if (!query) return;\n        try {\n            const images = await searchImages(query);\n            appendImages(images);\n            showLoadMoreBtn();\n            smoothScrollToNextGroup();\n        } catch (error) {\n            console.error('Error searching images:', error.message);\n        }\n    });\n}\n\nfunction appendImages(images) {    \n}\n\nfunction showLoadMoreBtn(images) {\n    const totalHits = images.totalHits || 0;\n    if (totalHits > 0 && gallery.children.length >= totalHits) {\n        loadMoreBtn.classList.add('hidden');\n        console.log(\"We're sorry, but you've reached the end of search results.\");\n    }\n}\n\nfunction smoothScrollToNextGroup() {\n    if (gallery.firstElementChild) {\n        const cardHeight = gallery.firstElementChild.getBoundingClientRect().height;\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth'\n        });\n    }\n}"],"names":["hideLoader","loader","currentPage","currentQuery","perPage","searchImages","query","fetchImages","fetchNextPage","page","url","response","axios","error","SimpleLightbox","gallery","form","loadMoreBtn","images","smoothScrollToNextGroup","initializeSearch","event","showLoadMoreBtn","totalHits","cardHeight"],"mappings":"6vBAwDO,SAASA,EAAWC,EAAQ,CAC/BA,EAAO,UAAU,IAAI,QAAQ,CACjC,CCvDA,IAAIC,EAAc,EACdC,EAAe,GACnB,MAAMC,EAAU,GAET,eAAeC,EAAaC,EAAO,CACtC,OAAAH,EAAeG,EACfJ,EAAc,EACPK,EAAYD,EAAOJ,CAAW,CACzC,CAEO,eAAeM,GAAgB,CAClC,OAAAN,IACOK,EAAYJ,EAAcD,CAAW,CAChD,CAEA,eAAeK,EAAYD,EAAOG,EAAM,CAEpC,MAAMC,EAAM,qEAA6C,mBAAmBJ,CAAK,CAAC,iEAAiEG,CAAI,aAAaL,CAAO,GAE3K,GAAI,CACA,MAAMO,EAAW,MAAMC,EAAM,IAAIF,CAAG,EACpC,OAAAV,IACOW,EAAS,KAAK,IACxB,OAAQE,EAAO,CACZ,cAAQ,MAAM,yBAA0BA,EAAM,OAAO,EAC/C,IAAI,MAAM,0BAA0BA,CAAK,EAAE,CACpD,CACL,CC1BiB,IAAIC,EAAe,YAAY,EAChD,MAAMC,EAAU,SAAS,cAAc,UAAU,EAClC,SAAS,cAAc,SAAS,EAC/C,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAc,SAAS,cAAc,gBAAgB,EAE3DA,EAAY,iBAAiB,QAAS,SAAY,CAC9C,GAAI,CACA,MAAMC,EAAS,MAAMV,IAErBW,GACH,OAAQN,EAAO,CACZ,QAAQ,MAAM,4BAA6BA,EAAM,OAAO,CAC3D,CACL,CAAC,EAED,SAAS,iBAAiB,mBAAoB,SAAY,CACtDO,EAAiBJ,CAAI,CACzB,CAAC,EAED,eAAeI,EAAiBJ,EAAM,CAClCA,EAAK,iBAAiB,SAAU,MAAOK,GAAU,CAC7CA,EAAM,eAAc,EACpB,MAAMf,EAAQU,EAAK,cAAc,OAAO,EAAE,MAAM,OAChD,GAAKV,EACL,GAAI,CACA,MAAMY,EAAS,MAAMb,EAAaC,CAAK,EAEvCgB,IACAH,GACH,OAAQN,EAAO,CACZ,QAAQ,MAAM,0BAA2BA,EAAM,OAAO,CACzD,CACT,CAAK,CACL,CAKA,SAASS,EAAgBJ,EAAQ,CAC7B,MAAMK,EAAYL,EAAO,WAAa,EAClCK,EAAY,GAAKR,EAAQ,SAAS,QAAUQ,IAC5CN,EAAY,UAAU,IAAI,QAAQ,EAClC,QAAQ,IAAI,4DAA4D,EAEhF,CAEA,SAASE,GAA0B,CAC/B,GAAIJ,EAAQ,kBAAmB,CAC3B,MAAMS,EAAaT,EAAQ,kBAAkB,sBAAqB,EAAG,OACrE,OAAO,SAAS,CACZ,IAAKS,EAAa,EAClB,SAAU,QACtB,CAAS,CACJ,CACL"}